"use strict";(self.webpackChunktibia=self.webpackChunktibia||[]).push([[5],{6623:(e,a,l)=>{l.d(a,{A:()=>s});var t=l(1601),o=l.n(t),n=l(6314),r=l.n(n)()(o());r.push([e.id,".ellipsis{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.balance-green input{border-color:#198754}.balance-orange input{border-color:#fd7e14}.balance-red input{border-color:#dc3545}.loot-transfer{margin:.5rem 0 0}.loot-transfer img{vertical-align:middle;margin:0 0 0 5px;cursor:pointer;transition:transform .3s}.loot-transfer img:hover{transform:scale(1.1)}",""]);const s=r},3351:(e,a,l)=>{l.r(a),l.d(a,{default:()=>z});var t=l(1425);const o={class:"card"},n={class:"card-content"},r={class:"input-group large right"},s={class:"row row-wrap"},i={class:"mt ellipsis"},c=["onClick"],p={class:"input-group left mts"},d=["for"],u=["id","onUpdate:modelValue"],m={class:"input-group left mts"},h=["for"],g=["id","onUpdate:modelValue"],f={class:"mt"},k=["title","onClick"],b={class:"row mt"},L={class:"col"},y={class:"col"},v={name:"Loot",data:function(){return{log:"",logParsed:[],parsed:!1,teamSize:0,teamBalance:0,playerBalance:0,transfer:[]}},methods:{parseLog:function(){let e=this.log.split("\n"),a=/\d+/g;e.splice(0,6),this.teamSize=e.length/6,this.teamBalance=0,this.logParsed=[],this.transfer=[];for(let l=0;l<this.teamSize;l++){let t=e[6*l].replace(" (Leader)",""),o=parseInt(e[6*l+1].replaceAll(",","").match(a)),n=parseInt(e[6*l+2].replaceAll(",","").match(a)),r=o-n;this.logParsed.push({name:t,loot:o,supplies:n,balance:r}),this.teamBalance=this.teamBalance+o-n}this.playerBalance=Math.floor(this.teamBalance/this.teamSize),isNaN(this.playerBalance)&&(this.playerBalance=0),this.transferFromTo(),this.parsed=!0},updateResult:function(){this.teamBalance=0,this.logParsed.forEach((e=>{this.teamBalance=this.teamBalance+parseInt(e.loot)-parseInt(e.supplies),e.balance=parseInt(e.loot)-parseInt(e.supplies)})),this.playerBalance=Math.floor(this.teamBalance/this.teamSize),isNaN(this.playerBalance)&&(this.playerBalance=0),this.transferFromTo()},removePlayer:function(e){this.logParsed.splice(e,1),this.teamSize--,this.updateResult()},transferFromTo:function(){let e=this;e.transfer=[],e.logParsed.forEach(((a,l)=>{if(a.balance>e.playerBalance){let t=Math.abs(a.balance-e.playerBalance),o=l;e.logParsed.forEach(((a,l)=>{if(t>0&&a.balance<e.playerBalance){let l=Math.abs(a.balance-e.playerBalance),n=0;l<t?(n=l,t-=l):(n=t,t=0),a.balance+=n,e.logParsed[o].balance-=n,e.transfer.push({from:e.logParsed[o].name,to:a.name,gold:n})}}))}}))},copyToClipboard:function(e){let a=document.createElement("textarea");a.textContent=e,a.style.position="fixed",document.body.appendChild(a),a.select();try{return document.execCommand("copy")}catch(e){return console.warn("Copy to clipboard failed.",e),!1}finally{document.body.removeChild(a)}},formatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}};var B=l(5072),C=l.n(B),P=l(7825),W=l.n(P),w=l(7659),A=l.n(w),E=l(5056),S=l.n(E),x=l(540),_=l.n(x),I=l(1113),N=l.n(I),T=l(6623),R={};R.styleTagTransform=N(),R.setAttributes=S(),R.insert=A().bind(null,"head"),R.domAPI=W(),R.insertStyleElement=_(),C()(T.A,R),T.A&&T.A.locals&&T.A.locals;const z=(0,l(6262).A)(v,[["render",function(e,a,l,v,B,C){return(0,t.uX)(),(0,t.CE)("article",o,[a[14]||(a[14]=(0,t.Lk)("div",{class:"card-header"},[(0,t.Lk)("h2",{class:"card-title"},[(0,t.Lk)("img",{src:"icons/loot.svg",alt:"",width:"18",height:"18"}),(0,t.eW)(" Party loot splitter ")])],-1)),(0,t.Lk)("div",n,[(0,t.Lk)("form",{onSubmit:a[1]||(a[1]=(0,t.D$)(((...e)=>C.parseLog&&C.parseLog(...e)),["prevent"]))},[(0,t.Lk)("div",r,[(0,t.bo)((0,t.Lk)("textarea",{"onUpdate:modelValue":a[0]||(a[0]=a=>e.log=a)},null,512),[[t.Jo,e.log]]),a[4]||(a[4]=(0,t.Lk)("button",null,"Split loot",-1))]),a[5]||(a[5]=(0,t.Lk)("small",null,[(0,t.eW)("Copy "),(0,t.Lk)("strong",null,"entire"),(0,t.eW)(" log from Party Hunt Analyser. Application "),(0,t.Lk)("strong",null,"do not"),(0,t.eW)(" store or validate pasted log.")],-1))],32),a[13]||(a[13]=(0,t.Lk)("small",null,null,-1)),e.parsed?((0,t.uX)(),(0,t.CE)(t.FK,{key:0},[(0,t.Lk)("div",s,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.logParsed,((e,l)=>((0,t.uX)(),(0,t.CE)("div",{class:(0,t.C4)(["col col-25",{"balance-green":e.loot>e.supplies,"balance-orange":e.loot===e.supplies,"balance-red":e.loot<e.supplies}]),key:l},[(0,t.Lk)("h3",i,[(0,t.eW)((0,t.v_)(e.name)+" ",1),(0,t.Lk)("img",{src:"icons/remove.svg",alt:"",width:"24",height:"24",title:"Remove player",onClick:e=>C.removePlayer(l)},null,8,c)]),(0,t.Lk)("div",p,[(0,t.Lk)("label",{for:"loot_"+l},"Loot",8,d),(0,t.bo)((0,t.Lk)("input",{type:"number",id:"loot_"+l,"onUpdate:modelValue":a=>e.loot=a,onChange:a[2]||(a[2]=(...e)=>C.updateResult&&C.updateResult(...e))},null,40,u),[[t.Jo,e.loot,void 0,{number:!0}]])]),(0,t.Lk)("div",m,[(0,t.Lk)("label",{for:"supplies_"+l},"Supplies",8,h),(0,t.bo)((0,t.Lk)("input",{type:"number",id:"supplies_"+l,"onUpdate:modelValue":a=>e.supplies=a,onChange:a[3]||(a[3]=(...e)=>C.updateResult&&C.updateResult(...e))},null,40,g),[[t.Jo,e.supplies,void 0,{number:!0}]])])],2)))),128))]),a[11]||(a[11]=(0,t.Lk)("div",{class:"mts"},[(0,t.Lk)("small",null,[(0,t.eW)(" You can edit values in text fields."),(0,t.Lk)("br"),(0,t.eW)(" You can remove player by clicking on '"),(0,t.Lk)("strong",null,"x"),(0,t.eW)("' icon. ")])],-1)),(0,t.Lk)("div",f,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(e.transfer,((e,l)=>((0,t.uX)(),(0,t.CE)("p",{class:"loot-transfer",key:l},[(0,t.Lk)("strong",null,(0,t.v_)(e.from),1),a[6]||(a[6]=(0,t.eW)(" should transfer ")),(0,t.Lk)("strong",null,(0,t.v_)(C.formatNumber(e.gold)),1),a[7]||(a[7]=(0,t.eW)(" gp to ")),(0,t.Lk)("strong",null,(0,t.v_)(e.to),1),a[8]||(a[8]=(0,t.eW)(". ")),(0,t.Lk)("img",{src:"icons/copy.svg",alt:"",width:"24",height:"24",title:"transfer "+e.gold+" to "+e.to,onClick:a=>C.copyToClipboard("transfer "+e.gold+" to "+e.to)},null,8,k)])))),128))]),a[12]||(a[12]=(0,t.Lk)("div",{class:"mts"},[(0,t.Lk)("small",null,[(0,t.eW)(" You can copy '"),(0,t.Lk)("strong",null,"transfer [amount] to [name]"),(0,t.eW)("' by clicking on icon after text. ")])],-1)),(0,t.Lk)("div",b,[(0,t.Lk)("div",L,[(0,t.Lk)("div",{class:(0,t.C4)(["badge",{green:e.teamBalance>0,orange:0===e.teamBalance,red:e.teamBalance<0}])},[a[9]||(a[9]=(0,t.eW)(" Team balance ")),(0,t.Lk)("span",null,(0,t.v_)(C.formatNumber(e.teamBalance)),1)],2)]),(0,t.Lk)("div",y,[(0,t.Lk)("div",{class:(0,t.C4)(["badge",{green:e.playerBalance>0,orange:0===e.playerBalance,red:e.playerBalance<0}])},[a[10]||(a[10]=(0,t.eW)(" Each player balance ")),(0,t.Lk)("span",null,(0,t.v_)(C.formatNumber(e.playerBalance)),1)],2)])])],64)):(0,t.Q3)("v-if",!0)])])}]])}}]);